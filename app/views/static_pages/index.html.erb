<section class="todoapp">
  <header class="header">
    <h1>todos</h1>
    <!-- <input class="new-todo" placeholder="What needs to be done?" autofocus=""> -->
  </header>

  <section class="main">
    <ul class="todo-list">

    </ul>
  </section>
</section>


<script>
  $(function() {
    $.get("/tasks").success(function(data){
       let htmlString = "";
       $.each(data, function(index, task){
         const checkedStatus = task.done ? "checked" : "";
         const liElement = `<li>
                    <div class="view">
                      <input class="toggle" type="checkbox" ${checkedStatus} data-id="${task.id}">
                      <label>${task.title}</label>
                    </div>
                  </li>`;
          htmlString += liElement;
       });
       $('.todo-list').html(htmlString);

       $('.toggle').change(function(e) {
         $.post(`/tasks/${$(e.target).data("id")}`, {
           _method: "PUT",
           task: {
             done: Boolean($(e.target).is(":checked"))
           }
         });
       });
    });
  });
</script>
